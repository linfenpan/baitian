/*! 测试安装grunt 2015-03-03 */
window.isIndex=!0,seajs.config({alias:{_TouchSlide:"http://resource.a0bi.com/doudou/plugin/TouchSlide.1.1.js","game-list":"http://resource.a0bi.com/doudou/v2/script/game-list.js",util:"http://resource.a0bi.com/doudou/v2/script/util.js"}}),define("TouchSlide",function(require,exports,module){require("_TouchSlide"),module.exports=TouchSlide}),seajs.use(["common","jquery","TouchSlide"],function(a,b,c){var d=b("#banner");d.find(".bd li").length>0&&(c({slideCell:"#banner",titCell:".hd ul",mainCell:".bd ul",effect:"leftLoop",autoPage:!0,autoPlay:!0}),d.on("click",".pic",function(){return window.DDInnerJS?(a.location(b(this).attr("href")),!1):!0})),d.removeClass("hide").resize()}),seajs.use(["common","util","game-list","jquery"],function(a,b,c,d){var e=function(){this.init.apply(this,arguments)};e.prototype={init:function(a,c,e){this.$root=d(a),this.id=c||"gameList",e=e||3,this.ctrs={};for(var f="",g=0;e>g;g++){var h={id:this.id,index:g,className:"hide"};f+=b.format(this.tmp,h)}this.$root.html(f)},tmp:'<div id="${id}${index}" class="animate2 gameList ${className}">				<ul class="list"></ul>				<div class="clear"></div>				<div class="tC"><div class="loading">点击加载更多</div></div>				<div class="pager hide"></div>			</div>',initDataByIndexAndType:function(a,b){var d=this.$root.find("#"+this.id+a);if(0>=d)return this;var e=this.ctrs[a];e||(e=this.ctrs[a]=new c({root:"#"+this.id+a,needDesc:!0},{type:1,categoryId:0,gameType:b}))},show:function(a,b){var c,e=typeof a;c="number"==e?d("#"+this.id+a):"string"==e?d(e):a,b?(this.$last&&this.$last.addClass("hide"),c.removeClass("hide").css({left:0})):this.tabSwitch(c,this.$last||c),this.$last=c},tabSwitch:function(a,b){var c=a.index(),d=b.index();return c==d?void a.removeClass("hide").css({left:0}):(c>d?(b.css({left:"-100%"}),a.css({left:"100%"})):(b.css({left:"100%"}),a.css({left:"-100%"})),void setTimeout(function(){b.addClass("hide"),a.removeClass("hide"),setTimeout(function(){a.css({left:0})},50)},320))}};var f=d("#nav"),g=(d("#gameList"),d("#classify")),h=new e("#gameList","gameList",3);h.$root.append(g),f.on("click",".item",function(){var a=d(this),b=a.data("type")+"";if(a.attr("active"))return!1;switch(b){case"0":case"1":case"2":h.initDataByIndexAndType(b,b),h.show(+b);break;case"classify":h.show(g)}a.attr("active",1).siblings("[active]").removeAttr("active"),window.location.hash="#tab="+("classify"==b?"3":b)});var i=b.urlhash("tab")||"0";"0"!=i?f.find(".item").eq(i).click():(h.initDataByIndexAndType(0,0),h.show(0)),g.on("click",".list li",b.delay(function(){var a=d(this).data("link");return a?void b.openWindow(a):!1}))}),seajs.use(["jquery","util"],function(a,b){var c=function(){this.init.apply(this,arguments)};c.prototype={init:function(b,c){this.cnf=a.extend({title:"我玩过的游戏",saveKey:"ddplayedlist",autoHidden:!0},c),this.$root="string"==typeof b?a(b):b,this.$root.html('				<p class="title">'+this.cnf.title+'</p>				<ul class="list"></ul>				<div class="clear"></div>			'),this.$list=this.$root.find(".list"),this.bindUI()},bindUI:function(){var a=!1,c=[];if(c=window.localStorage&&window.localStorage.getItem?window.localStorage.getItem("ddplayedlist"):b.getCookie("ddplayedlist"),c=this.tryToParseList(c),c.length>0){for(var d in c){var e=c[d]||"",f=e.split("#");this.formateListItem(f)}this.bindEvent()}else a=!0;a&&this.cnf.autoHidden&&this.$root.css("display","none")},bindEvent:function(){this.$list.on("click",".item",b.delay(function(){var a=this.getAttribute("link");a&&(window.top.location=a)}))},tryToParseList:function(a){var b=[];try{b=JSON.parse(a)||[]}catch(c){}return b},formateListItem:function(c){if(c){var d='<li link="http://www.doudou.in/play/${link}/" class="item">${title}</li>',e=b.format(d,{link:c[1],title:c[0]}),e=a(e);this.$list.append(e)}}};new c("#playHistroy")});