define(function(t,i,s){var e=t("jquery"),n=function(t,i){return this.init.apply(this,([].unshift.call(i,t),i))};n.prototype={init:function(t,i,s){return this.root=t,this.total=i,this.con=e.extend({perPage:10,callback:function(){},autoLoad:!1,current:0,prev:"上一页",next:"下一页",go:"跳转",error:function(t){alert(t)}},s||{}),"string"==typeof t&&(this.root=e(t)),this.bindUI(),this},destroy:function(){this.prev.off("click"),this.next.off("click"),this.go.off("click"),this.root.empty(),this.con=null,this.root=this.prev=this.next=this.cur=this.tol=this.page=this.go=null},bindUI:function(){var t=this.con;this.root.html('<div class="ddPager">				<a class="prev" href="###"></a>				<span class="msg"><i class="e"></i>/<i class="t"></i></span>				<a class="next" href="###"></a>				<input class="page" type="number" min="1" max="1">				<a class="go" class="submit" href="###">跳转</a>			</div>'),this.prev=this.root.find(".prev"),this.next=this.root.find(".next"),this.cur=this.root.find(".e"),this.tol=this.root.find(".t"),this.page=this.root.find(".page"),this.go=this.root.find(".go"),this.prev.text(t.prev),this.next.text(t.next),this.cur.text(t.current+1),this.page.val(t.current+1),this.resetTotal(this.total),this.bindEvent()},bindEvent:function(){var t=this,i=this.con;this._wait=0,this.prev.on("click",this._(function(){i.current>0&&t.gotoPage(--i.current)})),this.next.on("click",this._(function(){i.current<i.sum-1&&t.gotoPage(++i.current)})),this.go.on("click",this._(function(){var s=t.page.val();if(/\D/g.test(s)||""==e.trim(s))i.error("pageInputInvalid");else{var n=~~s;n>i.sum?i.error("pageOverMax"):0>=n?i.error("pageOverMin"):(i.current=n-1,t.gotoPage(i.current))}})),i.autoLoad&&this.go.trigger("click")},resetTotal:function(t){this.total=t;var i=this.con,s=Math.ceil(this.total/i.perPage);i.sum=s,this.tol.text(s),this.page.attr("max",s),this.disposeItemClass(i.current)},disposeItemClass:function(t){var i="disable",s=this.con;this.prev[0>=t?"addClass":"removeClass"](i),this.next[t>=s.sum-1?"addClass":"removeClass"](i)},gotoPage:function(t){var i=this.con;i.current=t,this.disposeItemClass(t),this.cur.text(t+1),this.page.val(t+1),i.callback&&i.callback.call(this,this,t,this.root)},_:function(t){var i=this;return function(s){return i._wait<=0&&t&&t.call(this,s),!1}},wait:function(t){this._wait=t||1},notify:function(t){this._wait-=t||1}},e.fn.ddPager=function(){return this.pager=new n(this,arguments),this},e.fn.getDDPager=function(){return this.pager},s.exports=n});